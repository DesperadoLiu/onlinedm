<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="keywords" content="鬍鬚張,2026年菜, 年菜禮盒, 年菜預購, 團圓年菜, 外帶年菜, 團圓飯, 過年送禮, 禮盒推薦, 圍爐年菜, 冷凍年菜, 即食年菜, 餐廳年菜, 尾牙春酒, 新年禮盒, 年節伴手禮, 年菜組合, 家聚年菜, 團聚美食, 過年年菜, 團圓宴菜單, 精緻年菜禮盒, 中式年菜, 台灣年菜, 招牌年菜" />
  <meta name="description" content="2026年菜預購開跑！精選中式、台式、創意年菜禮盒，主廚手作團圓佳餚，滿足全家人味蕾。立即預訂人氣年菜、圍爐料理、年節禮盒，輕鬆準備幸福團圓飯，過好年更有年味！鬍鬚張秉持「體驗細膩台灣味」精神，嚴選優質農產品，使用100%台灣米、食材定期第三方公正檢驗機構檢測，具備完善食安管理機制，由ISO22000中央工廠統籌量產，嚴格品檢把關最安心。" />
  <meta name="author" content="鬍鬚張魯肉飯" />
  <meta name="copyright" content="鬍鬚張魯肉飯" />
  <meta property="og:title" content="鬍鬚張魯肉飯|2026年菜禮盒推薦|主廚手作團圓佳餚，滿足全家人味蕾" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://desperadoliu.github.io/onlinedm/despo/2025%E9%AC%8D%E9%AC%9A%E5%BC%B5%E7%AB%AF%E5%8D%88%E7%A6%AE%E7%9B%92.html" />
  <meta property="og:image" content="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/11/banner-2026春節_1600X700.jpg" />
  <meta property="og:description" content="鬍鬚張2026年菜禮盒，主廚手作團圓佳餚，滿足全家人味蕾" />
  <link rel="icon" type="image/jpeg" href="logo2.jpg" />
  <title>鬍鬚張魯肉飯|2026年菜禮盒推薦|團圓佳餚，滿足全家人味蕾</title>
  <link rel="stylesheet" href="style.css" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-F5GX7WL9ZX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-F5GX7WL9ZX');
  </script>

  <style>
    body { margin: 0; font-family: 'Microsoft JhengHei', sans-serif; background-color: #FFFFFF; color: #000; }

    .navbar button { background: linear-gradient(145deg, #b30000, #ff4d4d); color: #fff; border: none; padding: 9px 16px; margin: 3px; cursor: pointer; font-family: 'Microsoft JhengHei', sans-serif; font-size: 1rem; font-weight: bold; border-radius: 26px; box-shadow: 2px 3px 8px rgba(0, 0, 0, 0.2), inset 0 1px 2px rgba(255, 255, 255, 0.2); transition: all 0.3s ease; position: relative; overflow: hidden; }
    .navbar button::before { content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.35); transform: skewX(-20deg); transition: left 0.4s; }
    .navbar button:hover::before { left: 100%; }
    .navbar button:hover { background: linear-gradient(145deg, #ff6666, #b30000); box-shadow: 0 6px 12px rgba(255, 0, 0, 0.4), inset 0 1px 4px rgba(255, 255, 255, 0.3); transform: translateY(-2px); }
    .navbar button:active { transform: scale(0.97); box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.4); }

    .vdo { max-width: 100%; margin: 0 auto; padding: 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 0; }
    .vdo a img { width: 100%; max-width: 100%; height: auto; display: block; }
    .responsive-image, .responsive-video { width: 100%; height: auto; display: block; margin: 0; padding: 0; border: none; }

    @media (min-width: 600px) { .vdo a:first-child img { width: 60%; } .vdo a:nth-child(2) img { width: 38%; } }

    /* 手機版導覽列按鈕置中 */
    @media (max-width: 768px) {
      .navbar { display: flex; flex-direction: column; align-items: center; text-align: center; }
      .navbar button { width: 80%; margin: 8px 0; }
    }

/* ======= 超迷你浮動泡泡版 AI 客服 - 金色版 ======= */

/* 迷你浮動 FAB（金色） */
.ai-fab {
  position: fixed;
  bottom: 16px;
  right: 16px;
  background-color: #C59A2F; /* 金色 */
  color: #fff;
  border-radius: 50%;
  width: 38px;
  height: 38px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  box-shadow: 0 4px 14px rgba(0,0,0,0.25), inset 0 0 5px rgba(255,255,255,0.4);
  z-index: 1000;
  animation: floatBubble 3s ease-in-out infinite;
}

.ai-fab i {
  font-size: 18px;
}

@keyframes floatBubble {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}

/* ====== 超迷你 Chatbox（精品金色版） ====== */
.ai-chatbox {
  position: fixed;
  bottom: 65px;
  right: 16px;
  width: 280px;
  height: 400px;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 10px 22px rgba(0,0,0,0.23);
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 999;
}

/* 在客服泡泡旁顯示文字：線上AI詢問 */
.ai-fab-label {
  position: fixed;
  font-weight: bold;
  bottom: 23px;   /* 對齊泡泡垂直位置 */
  right: 64px;    /* 泡泡右方 + 文字 */
  background:#C59A2F;
  color: #fff;
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 12px;
  backdrop-filter: blur(4px);
  z-index: 1000;
  pointer-events: none; /* 不影響點擊 */
  white-space: nowrap;
  font-family: 'Microsoft JhengHei', sans-serif;
}


/* 頂部標題列（香檳金） */
.ai-chatbox__header {
  height: 40px;
  background: #C59A2F;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 10px;
  letter-spacing: 0.5px;
  box-shadow: inset 0 -2px 4px rgba(0,0,0,0.15);
}

.ai-chatbox__close {
  background: transparent;
  border: none;
  color: #fff;
  font-size: 14px;
  cursor: pointer;
}

/* 訊息內容區 */
.ai-chatbox__log {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  background: #fafafa;
  font-size: 12.5px;
  letter-spacing: 0.3px;
}

/* 輸入區 */
.ai-chatbox__inputbar {
  display: flex;
  border-top: 1px solid #eee;
}

.ai-chatbox__input {
  flex: 1;
  border: none;
  padding: 10px;
  font-size: 12.5px;
  outline: none;
}

/* 送出按鈕（精品金） */
.ai-chatbox__send {
  width: 62px;
  border: none;
  background: #C59A2F;
  color: #fff;
  font-weight: 600;
  font-size: 12.5px;
  cursor: pointer;
  box-shadow: inset 0 1px 3px rgba(255,255,255,0.4), inset 0 -2px 3px rgba(0,0,0,0.15);
}

/* 氣泡（迷你圓潤） */
.bubble {
  display: inline-block;
  max-width: 85%;
  padding: 6px 8px;
  border-radius: 12px;
  background: #fff;
  border: 1px solid #eee;
  font-size: 12.5px;
  line-height: 1.35em;
}

.row { margin: 5px 0; }
.row.user { text-align: right; }
.row.user .bubble { 
  background: #FFF7E0; /* 淺金色泡泡 */
  border-color: #E4C886;
}
.row.assistant { text-align: left; }

.row { margin: 5px 0; }
.row.user { text-align: right; }
.row.user .bubble { background: #e7f3ff; }
.row.assistant { text-align: left; }
</style>
</head>

<body>
  <header class="header">
    <img src="logo.png" class="logoph" />
    <input type="checkbox" id="check" />
    <label for="check" class="icons">
      <i class='bx bx-menu' id="menu-icon"></i>
      <i class='bx bx-x' id="close-icon"></i>
    </label>

    <nav class="navbar">
      <button onclick="gtag('event', 'click_shop_now', {event_category:'button',event_label:'立即選購'}); window.open('https://shop.fmsc.com.tw/', '_blank')">立即選購</button>
      <button onclick="gtag('event', 'click_store_local', {event_category:'button',event_label:'門市查詢'}); window.open('https://www.fmsc.com.tw/ch/mainaddr.php?n=store#pageCont7', '_blank')">門市查詢</button>
      <button onclick="gtag('event', 'click_web_home', {event_category:'button',event_label:'鬍鬚張官網'}); window.open('https://www.fmsc.com.tw/ch/index.php', '_blank')">鬍鬚張官網</button>
      <button onclick="gtag('event', 'click_add_fb', {event_category:'button',event_label:'追蹤粉絲團'}); window.open('https://www.facebook.com/FMSC1960.tw', '_blank')">追蹤粉絲團</button>
      <button onclick="gtag('event', 'click_add_line', {event_category:'button',event_label:'加Line好友'}); window.open('https://lin.ee/my1ihn4', '_blank')">加Line好友</button>
    </nav>
  </header>

  <div class="container">
    <div class="vdo">
      <video class="responsive-video" autoplay muted loop playsinline>
        <source src="https://videos.files.wordpress.com/aMLTswKX/2026e5b9b4e88f9ce79fade5bdb1e99fb3e69caae9858d.mp4" />
        您的瀏覽器不支援 HTML5 影片播放。
      </video>
      <img class="responsive-image" src="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/11/251107-節慶禮盒-春節-01_0.jpg" alt="鬍鬚張2026年菜預購開跑" />
      <img class="responsive-image" src="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/11/251107-節慶禮盒-春節-02_0.jpg" alt="年度品牌大使沙子宸推薦" />
      <img class="responsive-image" src="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/11/251107-節慶禮盒-春節-031.jpg" alt="精選中式、台式、創意年菜禮盒，主廚手作團圓佳餚，滿足全家人味蕾" />
      <img class="responsive-image" src="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/11/251107-節慶禮盒-春節-04_0.jpg" alt="立即預訂人氣年菜、圍爐料理、年節禮盒，輕鬆準備幸福團圓飯，過好年更有年味" />
      <img class="responsive-image" src="https://formosachangcoltd.wpcomstaging.com/wp-content/uploads/2025/04/250318-節慶禮盒-端午2-05_0.jpg" alt="鬍鬚張伴手禮盒版權宣告" />
    </div>
  </div>

  <div class="ai-fab" id="aiFab" title="年菜線上問">
    <i class='bx bx-message-rounded-dots' style='font-size:28px'></i>
  </div>
<div class="ai-fab-label">AI客服^^嗨皮</div>

  <div class="ai-chatbox" id="aiChat">
    <div class="ai-chatbox__header">
      <span>年菜禮盒都可以問我</span>
      <button class="ai-chatbox__close" id="aiClose">✕</button>
    </div>
    <div class="ai-chatbox__log" id="aiLog" aria-live="polite"></div>
    <div class="ai-chatbox__inputbar">
      <input class="ai-chatbox__input" id="aiInput" placeholder="想問年菜禮盒什麼問題?" />
      <button class="ai-chatbox__send" id="aiSend">送出</button>
    </div>
  </div>

  <script>
    // ======== 設定：Google Apps Script Web App URL ========
    // 請將下方的網址替換為您 GAS 發布後的 "Web App URL" (以 https://script.google.com/macros/s/... 開頭)
    const GAS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxGrBSYcw70GvGhN2lo1IuujgbiE5za6T5Wc9vDpW_fs29rwIbxVQCokdqmRAPZKc7r6g/exec'; 
    
    // 【資安修正】已移除 AUTH_TOKEN 變數。Token 絕不能暴露於前端程式碼中。
    // 請確保您的 GAS 後端也移除了 Token 驗證邏輯。

    // ======== UI 綁定 ========
    const $fab  = document.getElementById('aiFab');
    const $box  = document.getElementById('aiChat');
    const $log  = document.getElementById('aiLog');
    const $inp  = document.getElementById('aiInput');
    const $send = document.getElementById('aiSend');
    const $close= document.getElementById('aiClose');

    const SESSION = (crypto.randomUUID && crypto.randomUUID()) || String(Date.now());

    $fab.addEventListener('click', () => { $box.style.display = 'flex'; $inp.focus(); });
    $close.addEventListener('click', () => { $box.style.display = 'none'; });
    $send.addEventListener('click', sendMessage);
    $inp.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });

    function append(role, text){
      const row = document.createElement('div');
      row.className = `row ${role}`;

      // 建立氣泡元素
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      
      // 使用 textContent 插入文字，防堵 XSS
      bubble.textContent = text || '';
      
      // 保留換行與空白
      bubble.style.whiteSpace = 'pre-wrap'; 
      bubble.style.wordBreak = 'break-word';

      row.appendChild(bubble);
      $log.appendChild(row);
      $log.scrollTop = $log.scrollHeight;
    }

    let thinkingRow = null;
    function showThinking(){
      thinkingRow = document.createElement('div');
      thinkingRow.className = 'row assistant';
      thinkingRow.innerHTML = `<div class="bubble">AI思考中…</div>`;
      $log.appendChild(thinkingRow);
      $log.scrollTop = $log.scrollHeight;
    }
    function hideThinking(){ if(thinkingRow){ thinkingRow.remove(); thinkingRow=null; } }

    async function sendMessage(){
      const text = $inp.value.trim(); if(!text) return;
      append('user', text);
      $inp.value = '';
      showThinking();

      try {
        // GA 事件
        if (window.gtag) { gtag('event','ai_chat_send', { event_category:'ai_chat', event_label:'send' }); }

        // 修改為呼叫 GAS (使用 POST)
        // 注意：GAS 通常需要 Content-Type: text/plain 來避免 CORS OPTIONS 預檢失敗，但仍傳送 JSON 字串
        const resp = await fetch(GAS_SCRIPT_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'text/plain;charset=utf-8', 
          },
          body: JSON.stringify({
            message: text,
            // 【資安修正】不再傳送前端 Token，避免暴露
            // frontendToken: AUTH_TOKEN, 
            sessionId: SESSION,
            // ⭐⭐⭐ 關鍵修正：將 location.pathname 改為 location.href 傳送完整的 URL ⭐⭐⭐
            metadata: { page: location.href } 
          })
        });

        const data = await resp.json();
        hideThinking();

        if (data.success) {
            append('assistant', data.answer);
        } else {
            console.error('API Error:', data.error);
            // 由於 GAS 後端會回傳 "Access Denied."，所以這裡回傳的通用錯誤訊息
            // 很可能就是因為來源檢查失敗。
            append('assistant', '抱歉，目前無法處理您的請求。');
        }

      } catch (err) {
        hideThinking();
        console.error('Fetch Error:', err);
        append('assistant', '系統繁忙，連線發生問題，請稍後再試');
      }
    }
  </script>
</body>
</html>





